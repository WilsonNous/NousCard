{% extends "base.html" %}

{% block title %}{{ arquivo.nome_arquivo }} - NousCard{% endblock %}

{% block content %}
<section class="nc-section">
    <div class="nc-section-header">
        <div>
            <h2>üìÑ {{ arquivo.nome_arquivo | e }}</h2>
            <p class="nc-subtitle">
                Tipo: {{ arquivo.tipo | title }} ‚Ä¢ 
                Registros: {{ arquivo.total_registros }} ‚Ä¢ 
                Valor Total: R$ {{ arquivo.total_valor }} ‚Ä¢
                Importado em: {{ arquivo.created_at }}
            </p>
        </div>
        <a href="{{ url_for('operacoes.arquivos_importados_page') }}" class="nc-btn nc-btn-outline">‚Üê Voltar</a>
    </div>
    
    {% if registros %}
        <div class="nc-table-container" style="overflow-x: auto;">
            <table class="nc-table">
                <thead>
                    <tr>
                        {% if registros[0] %}
                            {% for key in registros[0].keys() %}
                                <th scope="col">{{ key | title }}</th>
                            {% endfor %}
                        {% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for registro in registros[:100] %}
                    <tr>
                        {% for valor in registro.values() %}
                            <td>{{ valor if valor else "‚Äî" }}</td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        {% if registros|length > 100 %}
        <p class="nc-muted">Mostrando primeiros 100 registros de {{ registros|length }}.</p>
        {% endif %}
    {% else %}
        <div class="nc-empty-state">
            <p>Nenhum registro neste arquivo.</p>
        </div>
    {% endif %}
</section>
{% endblock %}
