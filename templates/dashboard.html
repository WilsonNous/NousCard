{% extends "base.html" %}

{% block content %}

<section class="nc-section">
    <h2 class="nc-title">Ol√°, {{ usuario.nome }} üëã</h2>

    <div class="nc-user-status">
        <div>
            <span class="label">Acesso:</span>
            {% if session.get('is_master') %}
                <span class="role master">MASTER</span>
            {% elif session.get('is_admin') %}
                <span class="role admin">ADMINISTRADOR</span>
            {% else %}
                <span class="role user">Usu√°rio</span>
            {% endif %}
        </div>

        <div>
            <span class="label">Empresa:</span>
            {% if session.get('is_master') %}
                ‚Äî (usu√°rio MASTER sem v√≠nculo)
            {% else %}
                {{ usuario.empresa_nome }}
            {% endif %}
        </div>
    </div>

    <div class="nc-dashboard-actions">
        <a href="{{ url_for('operacoes.importar_page') }}" class="nc-btn-primary">‚¨ÜÔ∏è Importar Arquivos</a>
        <a href="{{ url_for('operacoes.conciliar_page') }}" class="nc-btn-secondary">‚úîÔ∏è Concilia√ß√£o</a>
    </div>
</section>

<section class="nc-section">
    <h2 class="nc-subtitle">Vis√£o Geral</h2>

    <div class="nc-kpis">

        <div class="nc-kpi-card">
            <div class="kpi-icon kpi-blue">üõçÔ∏è</div>
            <div class="kpi-info">
                <div class="kpi-label">Total Vendas</div>
                <div class="kpi-value kpi-value-vendas">R$ 0,00</div>
            </div>
        </div>

        <div class="nc-kpi-card">
            <div class="kpi-icon kpi-green">üí∏</div>
            <div class="kpi-info">
                <div class="kpi-label">Total Recebido</div>
                <div class="kpi-value kpi-value-recebido">R$ 0,00</div>
            </div>
        </div>

        <div class="nc-kpi-card">
            <div class="kpi-icon kpi-yellow">‚ö†Ô∏è</div>
            <div class="kpi-info">
                <div class="kpi-label">Diferen√ßa</div>
                <div class="kpi-value kpi-value-diferenca">0,00</div>
            </div>
        </div>

        <div class="nc-kpi-card">
            <div class="kpi-icon kpi-red">üîî</div>
            <div class="kpi-info">
                <div class="kpi-label">Alertas</div>
                <div class="kpi-value kpi-value-alertas">0</div>
            </div>
        </div>

    </div>
</section>

<!-- ============================================================
     NOVA SE√á√ÉO: ADQUIRENTES (com √≠cones e cores)
============================================================ -->
<section class="nc-section">
    <h2 class="nc-subtitle">Totais por Adquirente</h2>
    <div id="acqContainer" class="nc-acq-grid"></div>
</section>

<!-- ============================================================
     GR√ÅFICOS
============================================================ -->
<section class="nc-section">
    <h2 class="nc-subtitle">Gr√°fico de Vendas x Recebido</h2>

    <div class="nc-graphs-container">
        <canvas id="graficoVendasRecebidos"></canvas>
    </div>
</section>

<section class="nc-section">
    <h2 class="nc-subtitle">Vendas por Bandeira</h2>

    <div class="nc-graphs-container">
        <canvas id="graficoBandeiras"></canvas>
    </div>
</section>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>

<style>

.nc-acq-grid {
    display: grid;
    gap: 15px;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
}

.nc-acq-card {
    background: #fff;
    padding: 15px;
    border-radius: 14px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.12);
    border: 1px solid #eee;
    text-align: center;
    transition: 0.2s;
}

.nc-acq-card:hover {
    transform: translateY(-4px);
}

.nc-acq-icon {
    font-size: 32px;
    margin-bottom: 6px;
}

.nc-acq-value {
    font-size: 20px;
    font-weight: bold;
    margin-top: 4px;
}

/* Cores personalizadas */
.acq-cielo { color: #0071ce; }
.acq-rede { color: #ff6600; }
.acq-getnet { color: #cc0000; }
.acq-stone { color: #0fa968; }
.acq-pagseguro { color: #13a300; }
.acq-outros { color: #444; }

</style>

{% endblock %}
